---
title: "NOAA data analysis"
output: html_notebook
---


```{r}
library(dplyr)
library(ggplot2)
library(tswge)
```

read in GNCHD data from NOAA_api_testing
```{r}
df <- read.csv(file.choose())
```
```{r}
head(df)
```

Attributes are
Date - YYYY-MM-DD T H:M:S
Datatype - PRCP, SNOW, 
Station - location of data intake
attributes - ? 
value - datatype dependent 


```{r}
unique(df$datatype)
length(unique(df$station)) #1596 stations
unique(df$attributes)
```
pull in station to location data to add location column(s) to dataset 

```{r}
location <- read.csv(file.choose()) #stations tx coordinates
head(location)
```
```{r}
# lframe <- data.frame() #create df with matching locations to stations
# for(r in df$station){
#   temp_row <- location[location$station_code == r, ]
#   lframe <- rbind(lframe, temp_row)
# }
# #then cbind onto df
#inner join takes care of the matching
```

```{r}
tx <- inner_join(location, df, by= 'station')
```

```{r}
#looking at a single station
s1 <- tx[tx$station==unique(tx$station)[1], ]

```


```{r}
head(s1)
```


```{r}
#x <- s1[s1$datatype == 'SNOW', ]
s1[s1$datatype == 'SNOW', ]
```

```{r}
x <- tx[grepl('HOUSTON', tx$name), ]
unique(x$name)
unique(x$station)
```

isolate 1month daily data from airport example
```{r}
y <- tx[tx$station == 'GHCND:USW00053910', ]
unique(y$datatype)
y[y$datatype == 'TMAX', ]
```
???  txmax of -50? have to double check the units




























